<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>힐러 성향 진단</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 10px;
            overflow-x: hidden;
        }

        /* iframe 호환성을 위한 추가 스타일 */
        html, body {
            width: 100%;
            height: 100%;
        }

        /* iframe 내부에서의 스크롤 처리 */
        body {
            overflow-y: auto;
        }

        .container {
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            max-width: 600px;
            width: 100%;
            margin: 20px auto;
            overflow: hidden;
            min-height: 500px;
        }

        .header {
            background: linear-gradient(45deg, #4CAF50, #45a049);
            color: white;
            text-align: center;
            padding: 30px 20px;
        }

        .header h1 {
            font-size: 2.2em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .header p {
            font-size: 1.1em;
            opacity: 0.9;
        }

        .content {
            padding: 40px 30px;
            text-align: center;
        }

        .question-selection {
            margin-bottom: 30px;
        }

        .question-selection h2 {
            color: #333;
            margin-bottom: 25px;
            font-size: 1.8em;
        }

        .option-buttons {
            display: grid;
            gap: 15px;
            max-width: 400px;
            margin: 0 auto;
        }

        .option-btn {
            padding: 15px 25px;
            border: 2px solid #4CAF50;
            border-radius: 12px;
            background: white;
            color: #4CAF50;
            font-size: 1.1em;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 600;
        }

        .option-btn:hover {
            background: #4CAF50;
            color: white;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(76, 175, 80, 0.3);
        }

        .quiz-container {
            display: none;
        }

        .progress-bar {
            background: #f0f0f0;
            border-radius: 10px;
            height: 8px;
            margin-bottom: 30px;
            overflow: hidden;
        }

        .progress {
            background: linear-gradient(45deg, #4CAF50, #45a049);
            height: 100%;
            border-radius: 10px;
            transition: width 0.3s ease;
        }

        .question-card {
            background: #f8f9ff;
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 25px;
            border-left: 5px solid #4CAF50;
        }

        .question-text {
            font-size: 1.3em;
            color: #333;
            margin-bottom: 25px;
            line-height: 1.5;
            font-weight: 500;
        }

        .answer-options {
            display: grid;
            gap: 10px;
        }

        .answer-btn {
            padding: 12px 20px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            background: white;
            color: #555;
            cursor: pointer;
            transition: all 0.2s ease;
            font-size: 1em;
        }

        .answer-btn:hover {
            border-color: #4CAF50;
            background: #f0f8f0;
            color: #2e7d32;
        }

        .answer-btn.selected {
            background: #4CAF50;
            color: white;
            border-color: #4CAF50;
        }

        .next-btn {
            background: linear-gradient(45deg, #4CAF50, #45a049);
            color: white;
            border: none;
            padding: 15px 40px;
            border-radius: 10px;
            font-size: 1.1em;
            cursor: pointer;
            margin-top: 20px;
            transition: all 0.3s ease;
            font-weight: 600;
        }

        .next-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(76, 175, 80, 0.3);
        }

        .next-btn:disabled {
            background: #ccc;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        .result-container {
            display: none;
            text-align: center;
        }

        .result-score {
            font-size: 3em;
            color: #4CAF50;
            font-weight: bold;
            margin: 20px 0;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.1);
        }

        .result-title {
            font-size: 2em;
            color: #333;
            margin-bottom: 20px;
            font-weight: bold;
        }

        .result-description {
            font-size: 1.2em;
            color: #666;
            line-height: 1.6;
            max-width: 500px;
            margin: 0 auto 30px;
        }

        .restart-btn {
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 10px;
            font-size: 1.1em;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 600;
        }

        .restart-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.3);
        }

        .question-counter {
            text-align: center;
            color: #666;
            font-size: 1.1em;
            margin-bottom: 20px;
            font-weight: 500;
        }

        @media (max-width: 480px) {
            .container {
                margin: 10px;
                border-radius: 15px;
            }
            
            .content {
                padding: 30px 20px;
            }
            
            .header h1 {
                font-size: 1.8em;
            }
            
            .question-text {
                font-size: 1.1em;
            }
        }

        /* iframe 전용 스타일 */
        @media (max-width: 768px) {
            body {
                padding: 5px;
            }
            
            .container {
                margin: 5px auto;
                border-radius: 10px;
                min-height: 400px;
            }
            
            .header {
                padding: 20px 15px;
            }
            
            .content {
                padding: 20px 15px;
            }
        }

        /* 매우 작은 iframe을 위한 스타일 */
        @media (max-width: 400px) {
            .header h1 {
                font-size: 1.5em;
            }
            
            .header p {
                font-size: 0.9em;
            }
            
            .question-text {
                font-size: 1em;
            }
            
            .option-btn, .answer-btn {
                padding: 10px 15px;
                font-size: 0.9em;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>🩺 힐러 성향 진단</h1>
            <p>당신의 RPG 힐러 적성을 확인해보세요!</p>
        </div>

        <div class="content">
            <!-- 시작 화면 -->
            <div id="start-screen">
                <div class="question-selection">
                    <h2>몇 개의 질문으로 진단하시겠어요?</h2>
                    <div class="option-buttons">
                        <button class="option-btn" onclick="startQuiz(10)">
                            ⚡ 빠른 진단 (10문항)
                        </button>
                        <button class="option-btn" onclick="startQuiz(25)">
                            🎯 기본 진단 (25문항)
                        </button>
                        <button class="option-btn" onclick="startQuiz(50)">
                            🔍 정밀 진단 (50문항)
                        </button>
                        <button class="option-btn" onclick="startQuiz(125)">
                            💎 완벽 진단 (125문항)
                        </button>
                    </div>
                </div>
            </div>

            <!-- 퀴즈 화면 -->
            <div id="quiz-screen" class="quiz-container">
                <div class="question-counter">
                    <span id="current-question">1</span> / <span id="total-questions">10</span>
                </div>
                <div class="progress-bar">
                    <div class="progress" id="progress"></div>
                </div>
                <div class="question-card">
                    <div class="question-text" id="question-text">
                        질문이 여기에 표시됩니다.
                    </div>
                    <div class="answer-options" id="answer-options">
                        <button class="answer-btn" onclick="selectAnswer(5)">매우 그렇다</button>
                        <button class="answer-btn" onclick="selectAnswer(4)">그렇다</button>
                        <button class="answer-btn" onclick="selectAnswer(3)">보통이다</button>
                        <button class="answer-btn" onclick="selectAnswer(2)">그렇지 않다</button>
                        <button class="answer-btn" onclick="selectAnswer(1)">매우 그렇지 않다</button>
                    </div>
                </div>
                <button class="next-btn" id="next-btn" onclick="nextQuestion()" disabled>
                    다음 질문
                </button>
            </div>

            <!-- 결과 화면 -->
            <div id="result-screen" class="result-container">
                <div class="result-score" id="score">0점</div>
                <div class="result-title" id="result-title">결과 제목</div>
                <div class="result-description" id="result-description">
                    결과 설명이 여기에 표시됩니다.
                </div>
                <button class="restart-btn" onclick="restart()">
                    🔄 다시 진단하기
                </button>
            </div>
        </div>
    </div>

    <script>
        // 전체 질문 데이터
        const questions = [
            "팀원들이 위험에 처했을 때 나서서 도움을 주는 것을 좋아한다.",
            "게임에서 승리보다는 팀원들이 즐겁게 플레이하는 것이 더 중요하다.",
            "복잡한 상황에서도 침착하게 우선순위를 정할 수 있다.",
            "다른 사람을 지켜주는 역할에서 성취감을 느낀다.",
            "게임에서 화려한 스킬보다는 안정적인 플레이를 선호한다.",
            "팀원들의 상태를 꼼꼼히 체크하며 게임한다.",
            "다른 사람이 실수해도 비난하지 않고 격려한다.",
            "팀원들과 적극적으로 소통하며 게임하는 것을 좋아한다.",
            "리더 역할보다는 팀을 뒷받침하는 역할이 편하다.",
            "다른 사람의 요청을 거절하기 어렵다.",
            "평소에도 다른 사람을 돌보는 것을 좋아한다.",
            "경쟁보다는 협력을 통해 목표를 달성하는 것을 선호한다.",
            "급하게 결정을 내리기보다는 신중하게 생각하는 편이다.",
            "다른 사람의 감정 변화를 잘 눈치챈다.",
            "완벽주의 성향이 있어서 실수하면 자책한다.",
            "게임에서 받는 스트레스보다 팀원들을 도운 보람이 더 크다.",
            "전투에서 직접 공격하기보다는 지원하는 것이 더 재미있다.",
            "게임 내에서 책임감이 큰 역할을 맡는 것이 부담스럽지 않다.",
            "다양한 스킬을 상황에 맞게 사용하는 것을 좋아한다.",
            "팀의 전략을 세우고 조율하는 역할에 관심이 있다.",
            "위험한 상황에서도 팀원을 구하려고 먼저 달려간다.",
            "게임 중 다른 일을 하느라 집중이 흐트러지는 일이 거의 없다.",
            "팀원이 도움을 요청하지 않아도 먼저 상황을 파악해서 도움을 준다.",
            "멀티태스킹을 하면서도 실수하지 않는 편이다.",
            "팀 전체의 상황을 파악하면서 게임하는 것이 자연스럽다.",
            "같은 실수를 반복하는 팀원에게도 참을성 있게 도움을 준다.",
            "게임에서 비판받아도 감정적으로 대응하지 않는다.",
            "긴장감이 높은 상황에서도 실수하지 않으려고 노력한다.",
            "팀원들이 짜증을 내도 차분하게 상황을 수습한다.",
            "반복적인 작업도 지루해하지 않고 꾸준히 한다.",
            "팀원의 체력이나 마나를 미리미리 체크한다.",
            "위험한 상황이 오기 전에 미리 대비한다.",
            "다른 사람의 플레이 패턴을 금방 파악한다.",
            "팀원이 말하지 않아도 무엇을 원하는지 안다.",
            "게임 중 작은 변화도 놓치지 않고 인지한다.",
            "내 캐릭터가 죽더라도 팀원을 살리려고 한다.",
            "좋은 아이템이 나와도 다른 사람에게 양보한다.",
            "내가 하고 싶은 것보다 팀에게 필요한 것을 우선한다.",
            "다른 사람을 위해서라면 손해를 감수할 수 있다.",
            "팀원의 요청을 들어주느라 내 시간을 포기하는 일이 많다.",
            "팀원이 다치면 내 탓이라고 생각한다.",
            "힐링 타이밍을 놓치면 한참 동안 신경쓰인다.",
            "게임에서 실수하면 다음에는 절대 안 하겠다고 다짐한다.",
            "다른 사람보다 내 실수에 더 엄격하다.",
            "팀원들에게 폐를 끼치는 것이 가장 싫다.",
            "팀원이 우울해 보이면 기분을 풀어주려고 한다.",
            "분위기가 험악해지면 중재하려고 노력한다.",
            "다른 사람의 고민을 들어주는 것을 좋아한다.",
            "팀원들끼리 갈등이 생기면 해결하려고 개입한다.",
            "게임 후에도 팀원들의 안부를 묻는다.",
            "힐러에 대한 공략이나 팁을 찾아서 공부한다.",
            "다른 힐러들의 플레이를 보고 배우려고 한다.",
            "실수했을 때 원인을 분석하고 개선하려고 한다.",
            "새로운 힐링 스킬이나 콤보를 연습하는 것을 좋아한다.",
            "팀원들의 피드백을 적극적으로 받아들인다.",
            "급작스러운 상황 변화에도 당황하지 않는다.",
            "여러 명이 동시에 위험해져도 차례대로 처리할 수 있다.",
            "계획에 없던 일이 생겨도 빠르게 적응한다.",
            "팀이 불리한 상황에서도 포기하지 않는다.",
            "예상치 못한 공격에도 즉시 대응할 수 있다.",
            "팀원들 사이의 실력 차이를 조율해준다.",
            "신입 팀원이 적응할 수 있도록 도와준다.",
            "팀의 약한 부분을 보완하려고 노력한다.",
            "다른 사람의 장점을 찾아서 칭찬해준다.",
            "팀워크를 해치는 행동은 절대 하지 않는다.",
            "게임에서 이기는 것보다 함께 즐기는 것이 중요하다.",
            "개인 기록보다 팀 성과에 더 관심이 많다.",
            "남을 도와주는 것에서 가장 큰 재미를 느낀다.",
            "경쟁보다는 서로 도우며 성장하는 것을 좋아한다.",
            "게임도 현실처럼 서로 배려해야 한다고 생각한다.",
            "긴 시간 게임해도 집중력이 떨어지지 않는다.",
            "스트레스 받는 상황에서도 냉정함을 유지한다.",
            "다른 일이 있어도 게임 중에는 완전히 집중한다.",
            "팀원들의 압박에도 흔들리지 않고 플레이한다.",
            "실패해도 다음 게임에는 마음을 새롭게 한다.",
            "팀의 방향성을 제시하는 역할을 자주 한다.",
            "어려운 결정을 내려야 할 때 팀원들 의견을 먼저 듣는다.",
            "전략을 세울 때 모든 팀원을 고려한다.",
            "갈등 상황에서 중립적인 입장을 유지한다.",
            "팀의 사기가 떨어졌을 때 격려한다.",
            "평소에도 계획을 세우고 준비하는 것을 좋아한다.",
            "다른 사람의 부탁을 거절하기가 어렵다.",
            "혼자 있는 시간보다 사람들과 함께 있는 것이 좋다.",
            "새로운 사람들과 친해지는 것이 어렵지 않다.",
            "다른 사람의 기분을 맞춰주려고 노력한다.",
            "게임 관련 커뮤니티에서 다른 사람들을 도와준다.",
            "친구들에게 게임을 가르쳐주는 것을 좋아한다.",
            "게임 정보나 팁을 공유하는 것에 적극적이다.",
            "다른 사람의 게임 고민을 들어주고 조언한다.",
            "게임 모임이나 이벤트 조직에 참여한다.",
            "보스전에서는 탱커보다 딜러를 먼저 살린다.",
            "위급상황에서는 생존보다 팀원 구조를 우선한다.",
            "자원이 부족할 때는 내 것을 나눠준다.",
            "시간이 촉박해도 팀원 상태를 확인하고 행동한다.",
            "개인 목표보다 팀 목표 달성을 우선한다.",
            "팀원들이 고마워하는 말을 들으면 뿌듯하다.",
            "성공적인 힐링으로 팀을 구했을 때 성취감을 느낀다.",
            "다른 사람이 성장하는 모습을 보면 기쁘다.",
            "팀의 승리에 내가 기여했다고 느낄 때 가장 만족한다.",
            "혼자서는 할 수 없는 일을 팀과 함께 해낼 때 보람을 느낀다.",
            "나는 천성적으로 다른 사람을 돌보는 사람이다.",
            "게임에서 가장 중요한 것은 팀원들과의 신뢰 관계다.",
            "힐러 역할이 나에게 가장 잘 어울린다고 생각한다.",
            "다른 포지션보다 힐러가 더 재미있고 의미있다.",
            "앞으로도 계속 힐러로 게임하고 싶다.",
            "힐러의 책임감이 부담스럽기보다는 보람있다.",
            "팀을 지키는 역할에서 자부심을 느낀다.",
            "나는 다른 사람들에게 꼭 필요한 존재가 되고 싶다.",
            "게임에서도 현실에서도 남을 도우며 사는 것이 가치있다.",
            "힐러로서 팀에 기여하는 것이 나의 정체성이다.",
            "위험을 무릅쓰고라도 팀원을 구하는 것이 당연하다.",
            "팀의 승패는 힐러인 나에게 달려있다고 생각한다.",
            "완벽한 힐링을 위해서는 어떤 노력도 마다하지 않는다.",
            "팀원들의 실수는 이해하지만 내 실수는 용납하기 어렵다.",
            "게임 중에는 팀원들의 안전이 나의 안전보다 중요하다.",
            "다른 사람들이 행복하게 게임할 수 있도록 돕는 것이 내 역할이다.",
            "힐러 없이는 팀이 제대로 돌아갈 수 없다고 생각한다.",
            "팀원들에게 인정받는 힐러가 되는 것이 목표다.",
            "게임에서 얻는 가장 큰 기쁨은 다른 사람을 도운 것이다.",
            "나는 타고나길 남을 뒷받침하는 역할에 적합하다.",
            "팀워크가 개인 플레이보다 훨씬 중요하다고 생각한다.",
            "혼자 잘하는 것보다 모두가 함께 잘하는 것이 더 의미있다.",
            "게임에서도 배려와 희생정신이 필요하다고 생각한다.",
            "강한 캐릭터보다는 도움이 되는 캐릭터가 되고 싶다.",
            "힐러는 단순한 게임 포지션이 아니라 팀의 수호자라고 생각한다."
        ];

        let currentQuestions = [];
        let currentQuestionIndex = 0;
        let totalQuestions = 0;
        let totalScore = 0;
        let selectedAnswer = null;

        function shuffleArray(array) {
            const shuffled = [...array];
            for (let i = shuffled.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [shuffled[i], shuffled[j]] = [shuffled[j], shuffled[i]];
            }
            return shuffled;
        }

        function startQuiz(numQuestions) {
            totalQuestions = numQuestions;
            currentQuestions = shuffleArray(questions).slice(0, numQuestions);
            currentQuestionIndex = 0;
            totalScore = 0;
            
            document.getElementById('start-screen').style.display = 'none';
            document.getElementById('quiz-screen').style.display = 'block';
            document.getElementById('total-questions').textContent = totalQuestions;
            
            showQuestion();
            adjustIframeHeight(); // 높이 조정
        }

        function showQuestion() {
            const questionText = document.getElementById('question-text');
            const currentQuestionSpan = document.getElementById('current-question');
            const progress = document.getElementById('progress');
            const nextBtn = document.getElementById('next-btn');
            
            questionText.textContent = currentQuestions[currentQuestionIndex];
            currentQuestionSpan.textContent = currentQuestionIndex + 1;
            progress.style.width = ((currentQuestionIndex + 1) / totalQuestions) * 100 + '%';
            
            // 선택 초기화
            selectedAnswer = null;
            const answerBtns = document.querySelectorAll('.answer-btn');
            answerBtns.forEach(btn => btn.classList.remove('selected'));
            nextBtn.disabled = true;
            
            if (currentQuestionIndex === totalQuestions - 1) {
                nextBtn.textContent = '결과 보기';
            }
            
            adjustIframeHeight(); // 높이 조정
        }

        function selectAnswer(score) {
            selectedAnswer = score;
            const answerBtns = document.querySelectorAll('.answer-btn');
            answerBtns.forEach(btn => btn.classList.remove('selected'));
            
            const selectedBtn = event.target;
            selectedBtn.classList.add('selected');
            
            document.getElementById('next-btn').disabled = false;
        }

        function nextQuestion() {
            if (selectedAnswer === null) return;
            
            totalScore += selectedAnswer;
            currentQuestionIndex++;
            
            if (currentQuestionIndex >= totalQuestions) {
                showResult();
            } else {
                showQuestion();
            }
        }

        function showResult() {
            document.getElementById('quiz-screen').style.display = 'none';
            document.getElementById('result-screen').style.display = 'block';
            
            const scoreElement = document.getElementById('score');
            const titleElement = document.getElementById('result-title');
            const descriptionElement = document.getElementById('result-description');
            
            const percentage = (totalScore / (totalQuestions * 5)) * 100;
            const maxScore = totalQuestions * 5;
            
            scoreElement.textContent = `${totalScore}/${maxScore}점 (${Math.round(percentage)}%)`;
            
            let title, description;
            
            if (percentage >= 80) {
                title = "🩺 완벽한 힐러!";
                description = "당신은 타고난 힐러입니다! 팀원들을 돌보는 것에서 진정한 기쁨을 찾고, 뛰어난 상황 판단력과 책임감을 가지고 있습니다. 팀의 수호천사 역할이 천직이에요.";
            } else if (percentage >= 65) {
                title = "⚕️ 힐러 적성 우수";
                description = "힐러로서 훌륭한 소질을 가지고 있습니다. 팀워크를 중시하고 다른 사람을 배려하는 마음이 뛰어나네요. 조금 더 연습하면 최고의 힐러가 될 수 있어요!";
            } else if (percentage >= 50) {
                title = "🤝 팀플레이어";
                description = "협력과 소통을 중시하는 좋은 팀원입니다. 힐러 역할도 충분히 소화할 수 있지만, 다른 서포트 역할도 고려해볼만 합니다. 팀에게 꼭 필요한 존재에요.";
            } else if (percentage >= 35) {
                title = "⚔️ 올라운더";
                description = "다양한 포지션에 적응할 수 있는 유연성을 가지고 있습니다. 힐러보다는 딜러나 탱커 역할이 더 어울릴 수 있지만, 상황에 따라 힐러도 가능해요.";
            } else {
                title = "🔥 어택커";
                description = "공격적이고 주도적인 성향이 강합니다. 딜러나 탱커 포지션이 더 잘 어울릴 것 같아요. 개인의 실력 발휘와 리더십을 통해 팀에 기여하는 스타일이네요!";
            }
            
            titleElement.textContent = title;
            descriptionElement.textContent = description;
        }

        function restart() {
            document.getElementById('result-screen').style.display = 'none';
            document.getElementById('start-screen').style.display = 'block';
            
            // 초기화
            currentQuestions = [];
            currentQuestionIndex = 0;
            totalQuestions = 0;
            totalScore = 0;
            selectedAnswer = null;
            
            adjustIframeHeight(); // 높이 조정
        }

        // 답변 버튼에 이벤트 리스너 추가
        document.addEventListener('DOMContentLoaded', function() {
            const answerBtns = document.querySelectorAll('.answer-btn');
            answerBtns.forEach((btn, index) => {
                const scores = [5, 4, 3, 2, 1];
                btn.addEventListener('click', function() {
                    selectAnswer(scores[index]);
                });
            });
            
            // 초기 높이 조정
            adjustIframeHeight();
        });

        // iframe 메시지 통신 (부모 창과의 높이 조정)
        function adjustIframeHeight() {
            if (window.parent !== window) {
                const height = document.body.scrollHeight;
                window.parent.postMessage({
                    type: 'resize',
                    height: height
                }, '*');
            }
        }

        // 페이지 로드 시 높이 조정
        window.addEventListener('load', adjustIframeHeight);
        
        // 콘텐츠 변경 시 높이 조정
        const observer = new MutationObserver(adjustIframeHeight);
        observer.observe(document.body, {
            childList: true,
            subtree: true,
            attributes: true
        });
    </script>
</body>
</html>